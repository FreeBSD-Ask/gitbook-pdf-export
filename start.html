<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>如何避免打印页面空白</title>
  <link rel="stylesheet" href="../highlight.css">
  <style>
    /* 使用@font-face引入自定义字体 'Noto Sans SC'，确保页面中使用该字体 */
    @font-face {
      font-family: Noto Sans SC;
      /* 指定字体的路径和格式，'opentype' 表示字体文件为 OpenType 格式 */
      src: url('/usr/local/share/fonts/noto/NotoSansSC-Thin.otf') format('opentype');
    }

    /* 同时设置行间距和段间距 */
    p {
      line-height: 1.5; /* 1.5 表示 1.5 倍行高 */
      margin-bottom: 1.5em; /* 设置段间距 */
      text-indent: 2em; /* 首行缩进 */
      /* 控制段落孤行 */
      orphans: 3; /* 段尾最少保留3行 */
      widows: 3;  /* 段首最少保留3行 */
    }

    /* 设置所有链接的默认颜色 */
    a {
      color: #007FFF;
      /* 移除链接下划线 */
      text-decoration: none;
    }

    /* 覆盖链接的其他状态 */
    a:hover,
    a:active,
    a:visited {
      color: #007FFF;
      text-decoration: none;
    }

    /* 打印媒体特殊设置 */
    @media print {
      /* 原始分页规则保留 */
      h1 { page-break-before: always; }
      h2 { page-break-before: always; }

      /* 新增打印优化规则 */
      h1 {
        page-break-after: avoid; /* 修改：避免标题后立即分页 */
      }

      /* 图片容器设置 */
      .figure-container {
        page-break-inside: avoid;
        break-inside: avoid;
        /* 修改：移除max-height限制，改为标准块级布局 */
        display: block;
        margin: 0.5cm 0;  /* 增加垂直间距 */
      }

      /* 页面基础设置 */
      body {
        /* 修改：进一步缩小边距和行高 */
        margin: 0.3cm !important;  /* 原0.5cm */
        line-height: 1.3;         /* 原1.4 */
      }

      /* 图片尺寸控制 */
      .figure-container img {
        /* 修改：降低高度并限制宽度 */
        max-height: 20cm !important;  /* 原24cm */
        max-width: 90% !important;    /* 新增宽度限制 */
        margin: 0 auto;               /* 新增水平居中 */
        object-fit: contain;
      }
    }

    /* 页面基础样式 */
    body {
      font-family: Noto Sans SC;
    }

    /* 表格样式 */
    table {
      border: 2px solid;
      border-radius: 8px;
      margin: 0 auto; 
    }

    table tr td {
      border-right: 1px solid;
      border-bottom: 1px solid;
      text-align: left;
    }

    table tr td:last-child {
      border-right: 0px;
    }

    table tr:last-child td {
      border-bottom: 0px;
    }

    table tr th {
      border-bottom: 1px solid;
      border-right: 1px solid;
      text-align: center;
    }

    table tr th:last-child {
      border-right: 0px;
    }

    /* 表格斑马纹 */
    tr:nth-child(even) {
      background-color: rgba(100,100,100,0.1);
    }

    tr:nth-child(odd) {
      background-color: rgba(255,255,255,0.3);
    }

    /* 图片响应式处理 */
    img {
      max-width: 100%;
    }

    /* 代码块样式 */
    pre {
      white-space: pre-wrap;
      overflow-wrap: break-word;
      font-size: 14px;
      padding: 10px;
      background-color: rgba(0, 100, 50, 0.1);
      border-radius: 6px;
    }

    /* 行内代码样式 */
    code {
      border: none;
      border-radius: 5px;
      background-color: rgba(100, 100, 50, 0.1);
      padding-left: 5px;
      padding-right: 5px;
    }

    /* 预格式化代码块 */
    pre code {
      border: none;
      background-color: transparent;
    }
    
    /* 图片容器 */
    .figure-container {
      page-break-inside: avoid;
      break-inside: avoid;
      margin: 1rem 0;
    }
  </style>
</head>
</body>
</html>
